# -*- mode: ruby -*-
# vi: set ft=ruby :
nodes = [
  { hostname: 'node-01', box: 'bento/ubuntu-18.04' }
]

Vagrant.configure('2') do |config|

config.vm.provider "vmware_fusion" do |v|
  v.memory = 3072
  v.cpus = 2
  v.gui = true
end

# Go through nodes and configure each of them.
  nodes.each do |node|
    config.vm.define node[:hostname] do |node_config|
      node_config.vm.box = node[:box]
      node_config.vm.hostname = node[:hostname]
      node_config.vm.provision "ansible" do |ansible|
        ansible.playbook = "provision.yml"
        ansible.groups = {
          "workstation"  => ["node-01"]
        }
      end
    end
  end
end
